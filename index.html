
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Guardians Remnant â€“ Step 5A</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; background:#07131f; overflow:hidden; font-family:system-ui; }
#ui {
 position:fixed; top:10px; left:10px;
 background:rgba(0,0,0,.4);
 border:1px solid rgba(0,200,255,.35);
 padding:10px; border-radius:10px; color:#9feaff;
}
button {
 background:#0b2238; color:#9feaff;
 border:1px solid rgba(0,200,255,.35);
 padding:6px 10px; border-radius:8px;
 margin-right:6px;
}
button.active { background:#155e75; }
canvas { display:block; }
</style>
</head>
<body>
<div id="ui">
<b>Step 5A: Entity Layer (Sprites)</b><br><br>
<button id="terrainBtn">Terrain</button>
<button id="entityBtn" class="active">Entities</button>
<button id="eraseBtn">Eraser</button>
</div>
<canvas id="game"></canvas>

<script type="module">
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const DPR = window.devicePixelRatio || 1;

let tileSize = 32;
let gridW = 30, gridH = 20;
let entities = [];
let mode = "entity";

const playerImg = new Image();
playerImg.src = "assets/entities/player.png";

function resize(){
 canvas.width = innerWidth * DPR;
 canvas.height = innerHeight * DPR;
 canvas.style.width = innerWidth+"px";
 canvas.style.height = innerHeight+"px";
 ctx.setTransform(DPR,0,0,DPR,0,0);
}
window.addEventListener("resize", resize);
resize();

document.getElementById("terrainBtn").onclick=()=>mode="terrain";
document.getElementById("entityBtn").onclick=()=>mode="entity";
document.getElementById("eraseBtn").onclick=()=>mode="erase";

canvas.addEventListener("pointerdown", e=>{
 const x = Math.floor(e.offsetX / tileSize);
 const y = Math.floor(e.offsetY / tileSize);
 if(mode==="entity"){
   entities.push({type:"player", x, y});
 }
 if(mode==="erase"){
   entities = entities.filter(ent=>!(ent.x===x && ent.y===y));
 }
});

function drawGrid(){
 ctx.strokeStyle="rgba(0,200,255,.15)";
 for(let x=0;x<gridW;x++){
  ctx.beginPath();
  ctx.moveTo(x*tileSize,0);
  ctx.lineTo(x*tileSize,gridH*tileSize);
  ctx.stroke();
 }
 for(let y=0;y<gridH;y++){
  ctx.beginPath();
  ctx.moveTo(0,y*tileSize);
  ctx.lineTo(gridW*tileSize,y*tileSize);
  ctx.stroke();
 }
}

function drawEntities(){
 for(const e of entities){
  ctx.drawImage(playerImg, e.x*tileSize, e.y*tileSize, tileSize, tileSize);
 }
}

function loop(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 drawGrid();
 drawEntities();
 requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
