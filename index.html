<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Guardians Remnant – Creator Engine</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
html,body{margin:0;padding:0;background:#0b1320;color:#7fd4ff;font-family:system-ui;}
#log{position:fixed;left:10px;top:10px;background:rgba(0,0,0,.35);padding:8px;border:1px solid rgba(127,212,255,.4);border-radius:6px}
#ui{position:fixed;right:10px;top:10px;display:flex;gap:6px}
button{background:#12233f;color:#7fd4ff;border:1px solid #2b5ea8;padding:6px 10px;border-radius:6px}
canvas{display:block}
</style>
</head>
<body>
<div id="log">Booting…</div>
<div id="ui">
<button id="clear">Clear</button>
<button id="export">Export</button>
</div>
<canvas id="game"></canvas>

<script type="module">
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const log = msg => document.getElementById("log").textContent = msg;

const TILE = 32;
let map = JSON.parse(localStorage.getItem("gr_map")||"[]");

function resize(){
 canvas.width = innerWidth;
 canvas.height = innerHeight;
}
addEventListener("resize",resize); resize();

canvas.addEventListener("click",e=>{
 const x=Math.floor(e.offsetX/TILE);
 const y=Math.floor(e.offsetY/TILE);
 map.push({x,y});
 localStorage.setItem("gr_map",JSON.stringify(map));
});

document.getElementById("clear").onclick=()=>{
 map=[]; localStorage.removeItem("gr_map");
};

document.getElementById("export").onclick=()=>{
 navigator.clipboard.writeText(JSON.stringify(map,null,2));
 alert("Map JSON copied");
};

let ticks=0;
function loop(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 ctx.strokeStyle="rgba(127,212,255,.25)";
 for(let x=0;x<canvas.width;x+=TILE){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,canvas.height);ctx.stroke();}
 for(let y=0;y<canvas.height;y+=TILE){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(canvas.width,y);ctx.stroke();}
 ctx.fillStyle="#3fb950";
 for(const t of map){ctx.fillRect(t.x*TILE,t.y*TILE,TILE,TILE);}
 ticks++; log("Saved tiles: "+map.length+" | Loop: "+ticks);
 requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
