
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Guardians Remnant â€“ Step 6A Runtime</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
html,body{margin:0;padding:0;background:#061018;color:#7fd4ff;font-family:system-ui;}
canvas{display:block;}
#hud{
 position:fixed;left:10px;top:10px;
 background:rgba(0,0,0,.35);
 border:1px solid rgba(127,212,255,.35);
 padding:8px 12px;border-radius:10px;
}
</style>
</head>
<body>
<div id="hud">Step 6A: Runtime Loader</div>
<canvas id="game"></canvas>

<script type="module">
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const hud = document.getElementById("hud");

function resize(){
  canvas.width = innerWidth * devicePixelRatio;
  canvas.height = innerHeight * devicePixelRatio;
  canvas.style.width = innerWidth+"px";
  canvas.style.height = innerHeight+"px";
  ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
}
addEventListener("resize",resize); resize();

const tileSize = 32;
let camera = {x:0,y:0};

// Demo inline data (replace with fetch later)
const mapData = {
  width:20,height:12,tileSize:32,
  tiles:{ "0,5":1,"1,5":1,"2,5":1,"3,5":1,"4,5":1 }
};
const entities = [
 {id:"player",x:2,y:4,color:"#7fd4ff"},
 {id:"npc",x:6,y:4,color:"#4cff9d"}
];

function drawGrid(){
 ctx.strokeStyle="rgba(127,212,255,.15)";
 for(let x=0;x<mapData.width;x++)
  for(let y=0;y<mapData.height;y++)
   ctx.strokeRect(x*tileSize-camera.x,y*tileSize-camera.y,tileSize,tileSize);
}

function drawTiles(){
 for(const k in mapData.tiles){
  const [x,y]=k.split(",").map(Number);
  ctx.fillStyle="#2d7d46";
  ctx.fillRect(x*tileSize-camera.x,y*tileSize-camera.y,tileSize,tileSize);
 }
}

function drawEntities(){
 for(const e of entities){
  ctx.fillStyle=e.color;
  ctx.fillRect(e.x*tileSize-camera.x,e.y*tileSize-camera.y,tileSize,tileSize);
 }
}

function loop(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 drawTiles();
 drawEntities();
 drawGrid();
 requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
